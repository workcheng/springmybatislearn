<!--模拟手机端面试视频上传-->
<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<title>视频文件上传</title>
		<script src="../style/lib/jquery.min.js"></script>
	</head>
	<body style="width: 600px;margin: 250px auto;">
		<form onsubmit="return false;" id="uploadForm">
			视频编号：<input type="text" id="video_id"/>（必填）<br /><br />
			域名：<input type="text" id="video_root"/>（默认localhost）<br /><br />
		            图片文件：<input type="file" id="video_image_data"/>（必填）<br /><br />
		            视频文件：<input type="file" id="video_data"/>（必填）<br /><br />
		    <input type="submit"  onclick="sendimg()"/>
		</form>
	</body>
	<script>
		var video_image_data="";
		var video_data="";
		$(document).ready(function(){
		    $("#video_image_data").change(function(){
		        var v = $(this).val();
		        var reader = new FileReader();
		        reader.readAsDataURL(this.files[0]);
		        reader.onload = function(e){
		            console.log(e.target.result);
		           video_image_data = e.target.result;
		        };
		    });
		    
		    $("#video_data").change(function(){
		        var v = $(this).val();
		        var reader = new FileReader();
		        reader.readAsDataURL(this.files[0]);
		        reader.onload = function(e){
		            console.log(e.target.result);
		            video_data = e.target.result;
		        };
		    });
		});
	
	
		function sendimg(){
			var obj = {};
			obj.video_image_file_name = "图片描述";
			obj.video_image_data = video_image_data;
			obj.video_file_name = "视频描述";
			obj.video_data = video_data;
			
			obj= JSON.stringify(obj);
			
			var id = $("#video_id").val();
			var root = $("#video_root").val()?$("#video_root").val():'localhost';
			
		    $.ajax({
		    	type:"post",
		    	url:"http://"+root+"/zerogmi/taho/taho_basic/mobile/interview_video/"+id,
		    	async:true,
		    	data: obj,
		    	timeout:"100000000",
		    	contentType:"application/json",
		    	success: function (returndata) {  
		            alert(1);  
		        },  
		        error: function (returndata) {  
		            alert(2);  
		        }  
		    });
		    
		}
	</script>
</html>
